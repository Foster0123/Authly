extends ../templates/base.pug
block title
    title Signin
block content
    form.form-container(action='', method='POST')
        .field 
            h1.is-size-1 Sign In
            p.span-error.has-text-centered.has-text-danger= userDoesntExist
        .field
            label.label Username
            .control.has-icons-left.has-icons-right
                input.input.is-link#username(
                    type='text',
                    placeholder='Username',
                    name='signin_username'
                )
                span.icon.is-small.is-left
                    i.fas.fa-user-circle
            p.span-error.has-text-danger.has-text-right= error.signin_username
        .field
            label.label Password
            .control.has-icons-left.has-icons-right
                input.password-field.input.is-link(
                    type='password',
                    placeholder='Password',
                    name='signin_password'
                )
                span.icon.is-small.is-left
                    i.bi.bi-key
                span.eye.is-small.is-right
                    i#login-eye.eye-icon.fas.fa-eye-slash(
                        style='cursor: pointer; z-index: 1'
                    )
            p.span-error.has-text-danger.has-text-right= error.signin_password
        .field.is-grouped(style="margin-top: 16px!important;")
            .control
                button#login.button.is-link Login
        .field.has-text-centered
            .control
                span
                    p.has-text-danger(style="margin-top: 16px;!")
                        | First Time Here ?
                        a(href='/signup').has-text-warning
                            | Register
    script(type='text/javascript').
        const username = document.getElementById("username")
        const loginEye = document.getElementById('login-eye')
        const pcode = document.getElementsByClassName('password-field')[0]
        const loginButton = document.getElementById("login")

        const showHidePassword = () => {
            if (pcode.type === 'password') {
                loginEye.className = 'eye-icon fas fa-eye-slash'
                pcode.type = 'text'
            } else {
                loginEye.className = 'eye-icon fas fa-eye'
                pcode.type = 'password'
            }
        }
        loginButton.addEventListener("click", () => {
            localStorage.setItem("signin_username", username.value)
        })
        window.addEventListener("load", () => {
            username.value = localStorage.getItem("signin_username")
        })
        loginEye.addEventListener('click', showHidePassword)
